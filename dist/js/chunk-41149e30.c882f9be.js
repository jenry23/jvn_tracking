(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41149e30"],{"210e":function(t,e,n){},"2b2f":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[t.$can(t.xprops.permission_prefix+"create")?n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:t.xprops.route+".create"}}},[n("i",{staticClass:"material-icons"},[t._v("\n              add\n            ")]),t._v("\n            Add Maps Route\n      ")]):t._e(),n("div",{attrs:{id:"app"}},[n("GoogleMap")],1)],1)])])},a=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("h2",[t._v("Search and add a pin")]),n("GmapAutocomplete",{on:{place_changed:t.setPlace}}),n("button",{on:{click:t.addMarker}},[t._v("\n      Add\n    ")])],1),t._v("\n  "+t._s(t.center)+"\n  "),n("GmapMap",{ref:"mapRef",staticStyle:{width:"100%",height:"800px"},attrs:{center:t.center,zoom:15}},[n("GmapMarker",{ref:"myMarker",attrs:{position:t.google&&new t.google.maps.LatLng(this.center)}}),t._v("\n   />\n  ")],1)],1)},i=[],o=n("aeac"),l=n("602f"),c=n("755e"),u={name:"GoogleMap",components:{DirectionsRenderer:l["a"]},data(){return{center:{lat:0,lng:0},marker:{lat:14.1935599,lng:121.2848253},currentPlace:null,panel:"",markers:[],places:[],bounds:{}}},computed:{google:c["gmapApi"],origin(){return this.start?{query:this.start}:null},destionation(){return this.end?{query:this.end}:null}},mounted(){this.updateMarkers(),this.geolocate()},methods:{setPlace(t){this.currentPlace=t},addMarker(){if(this.currentPlace){const t={lat:14.254004666666667,lng:121.37980116666667};this.markers.push({position:t}),this.places.push(this.currentPlace),this.center=t,this.currentPlace=null}},geolocate:function(){const t=this;var e=o["b"].ref("driverTrips/");e.on("value",(function(e){var n=e.val().E7Dz1of399gEDpvK7UOT,s=parseFloat(n.latitude),a=parseFloat(n.longitude);t.center={lat:s,lng:a}})),t.start={lat:14.1819506,lng:121.1772846},console.log(t.start)},updateMarkers:function(){this.$refs.mapRef.$mapPromise.then(t=>{const e=new google.maps.TrafficLayer;e.setMap(t),t.panTo(this.center)})},addChangeBoundsListener(){}}},d=u,p=n("2877"),m=Object(p["a"])(d,r,i,!1,null,null,null),f=m.exports,h=n("2f62"),g=n("3cc6"),b=n("3d02"),v={components:{GlobalSearch:b["a"],HeaderSettings:g["a"],GoogleMap:f},data(){return{xprops:{module:"MapRouteIndex",route:"map_route",permission_prefix:"map_route_"}}},beforeDestroy(){this.resetState()},computed:{...Object(h["c"])("MapRouteIndex",["data","total","loading"])},mounted(){},methods:{...Object(h["b"])("MapRouteIndex",["fetchIndexData","setQuery","resetState"]),getList:function(t){this.todoList=t}}},_=v,C=Object(p["a"])(_,s,a,!1,null,null,null);e["default"]=C.exports},"3cc6":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{name:"HeaderSettings"}},[t._m(0),n("div",{staticClass:"dropdown-menu p-2 mr-5"},[n("h5",{staticClass:"ml-2 mb-1"},[t._v("\n      "+t._s(t.$t("global.datatables.colvis"))+"\n    ")]),n("hr",{staticClass:"my-1"}),t._l(t.columns,(function(e,s){return n("div",{key:e.title+s},[n("div",{staticClass:"dropdown-item px-2 mt-0 mb-1",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.handleChange(e)}}},[t.isColVisible(e)?n("i",{staticClass:"material-icons text-success mr-2"},[t._v("\n          done\n        ")]):n("i",{staticClass:"material-icons text-rose mr-2"},[t._v("close")]),t._v("\n        "+t._s(t.$t(e.title))+"\n      ")])])})),n("hr",{staticClass:"my-1"}),n("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button"}},[t._v("\n      "+t._s(t.$t("global.close"))+"\n    ")])],2)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[n("i",{staticClass:"fa fa-cog"}),n("span",{staticClass:"caret"})])}],r={name:"HeaderSettings",props:["columns"],methods:{isColVisible(t){return"undefined"===typeof t.visible||""+t.visible==="true"},handleChange(t){this.$set(t,"visible",!this.isColVisible(t))}}},i=r,o=(n("b15f"),n("2877")),l=Object(o["a"])(i,s,a,!1,null,"b03a5c46",null);e["a"]=l.exports},"3d02":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group bmd-form-group",class:{"has-items":t.query.s,"is-focused":t.focus}},[n("label",{staticClass:"bmd-label-floating"},[t._v("\n    Search\n  ")]),n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control",attrs:{type:"text",name:"search"},domProps:{value:t.query.s},on:{input:function(e){return t.debounceSearch(e.target.value)},focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}),0!==t.query.s.length?n("div",{staticClass:"btn btn-just-icon btn-round btn-link text-dark d-inline-block input-group-append m-0",staticStyle:{height:"36px"},on:{click:function(e){t.query.s=""}}},[n("i",{staticClass:"material-icons"},[t._v("clear")])]):t._e()])])},a=[],r={props:{query:{type:Object,require:!0}},data(){return{focus:!1}},methods:{debounceSearch:_.debounce((function(t){this.query.s=t,this.query.offset=0}),300)}},i=r,o=n("2877"),l=Object(o["a"])(i,s,a,!1,null,null,null);e["a"]=l.exports},"602f":function(t,e,n){"use strict";var s=n("755e");e["a"]=Object(s["MapElementFactory"])({name:"directionsRenderer",ctr(){return window.google.maps.DirectionsRenderer},events:["directions_changed"],mappedProps:{options:{zoomControl:!1}},props:{origin:{type:Object},destination:{type:Object},travelMode:{type:String}},afterCreate(t){let e=new window.google.maps.DirectionsService;this.$watch(()=>[this.origin,this.destination,this.travelMode],()=>{let{origin:n,destination:s,travelMode:a}=this;n&&s&&a&&(t.setOptions({preserveViewport:!0}),t.setPanel(document.getElementById("panel")),e.route({origin:n,destination:s,travelMode:a,drivingOptions:{departureTime:new Date(Date.now()),trafficModel:"optimistic"},avoidTolls:!0},(e,n)=>{"OK"===n&&t.setDirections(e)}))})}})},b15f:function(t,e,n){"use strict";n("210e")}}]);
//# sourceMappingURL=chunk-41149e30.c882f9be.js.map