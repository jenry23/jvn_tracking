(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-677f6176"],{"4d6c":function(e,t,n){},"8bf9":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"wrapper",class:{fullscreen:e.fullscreen},on:{fullscreenchange:e.onFullscreenChange}},[n("qrcode-stream",{attrs:{track:this.paintBoundingBox},on:{decode:e.onDecode,init:e.onInit}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showScanConfirmation,expression:"showScanConfirmation"}],staticClass:"scan-confirmation"},[e._v(" --\x3e\n            "),n("img",{attrs:{src:"/checkmark.svg",alt:"Checkmark",width:"128px"}})]),n("button",{staticClass:"fullscreen-button",on:{click:function(t){e.fullscreen=!e.fullscreen}}},[n("img",{attrs:{src:e.fullscreenIcon,alt:"toggle fullscreen"}})])])],1)},c=[],r=n("2f62"),l=n("aeac"),a=n("cc84"),o="firebase",i="8.6.4";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
a["default"].registerVersion(o,i,"app"),a["default"].SDK_VERSION=i;var u={data(){return{camera:"auto",fullscreen:!0,result:null,showScanConfirmation:!1,xprops:{module:"TicketsIndex",route:"tickets",permission_prefix:"tickets_"}}},beforeDestroy(){this.resetState()},computed:{...Object(r["c"])("TicketsIndex",["data","total","loading"]),fullscreenIcon(){return this.fullscreen?"/fullscreen-exit.svg":"/fullscreen.svg"}},watch:{fullscreen(e){e?this.requestFullscreen():this.exitFullscreen()}},mounted(){this.fetchIndexData()},methods:{...Object(r["b"])("TicketsIndex",["fetchIndexData","setQuery","resetState"]),paintBoundingBox(e,t){for(const n of e){const{boundingBox:{x:e,y:s,width:c,height:r}}=n;t.lineWidth=2,t.strokeStyle="#007bff",t.strokeRect(e,s,c,r)}},codeScanned(e){this.scanned=e;var t=this.$route.params.id,n=l["m"].doc(t);l["m"].doc(t).get().then(t=>{var s=t.data().passengerID;s.forEach(t=>{if(e==t.id)if(0==t.pickup||""==t.pickup)n.update({passengerID:a["default"].firestore.FieldValue.arrayUnion({name:t.name,id:t.id,pickup:!0})}),this.$swal({title:"Successfully Updated",text:t.name,type:"info",showCancelButton:!0,focusCancel:!0,reverseButtons:!0});else if(1==t.pickup){this.$swal({title:"You are Already Scanned",text:t.name,type:"warning",showCancelButton:!0,focusCancel:!0,reverseButtons:!0,confirmButtonText:"OK",confirmButtonColor:"#dd4b39"});const e={name:t.name,id:t.id,pickup:!1};n.update({passengerID:a["default"].firestore.FieldValue.arrayRemove(e)})}else this.$swal({title:"You are not Register in this Van",type:"warning",showCancelButton:!0,focusCancel:!0,reverseButtons:!0,confirmButtonText:"OK",confirmButtonColor:"#dd4b39"})})})},async onInit(e){try{await e}catch(t){console.error(t)}finally{this.showScanConfirmation="off"===this.camera}},async onDecode(e){this.result=e,this.codeScanned(e),this.pause(),await this.timeout(5e3),this.unpause()},unpause(){this.camera="auto"},pause(){this.camera="off"},timeout(e){return new Promise(t=>{window.setTimeout(t,e)})},onFullscreenChange(e){this.fullscreen=null!==document.fullscreenElement},requestFullscreen(){const e=this.$refs.wrapper;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}}},d=u,f=(n("a565"),n("2877")),m=Object(f["a"])(d,s,c,!1,null,"051cb48b",null);t["default"]=m.exports},a565:function(e,t,n){"use strict";n("4d6c")}}]);
//# sourceMappingURL=chunk-677f6176.d4ce5a59.js.map