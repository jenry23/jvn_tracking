(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ab1a3e4"],{"210e":function(t,e,a){},"3cc6":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{name:"HeaderSettings"}},[t._m(0),a("div",{staticClass:"dropdown-menu p-2 mr-5"},[a("h5",{staticClass:"ml-2 mb-1"},[t._v("\n      "+t._s(t.$t("global.datatables.colvis"))+"\n    ")]),a("hr",{staticClass:"my-1"}),t._l(t.columns,(function(e,s){return a("div",{key:e.title+s},[a("div",{staticClass:"dropdown-item px-2 mt-0 mb-1",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.handleChange(e)}}},[t.isColVisible(e)?a("i",{staticClass:"material-icons text-success mr-2"},[t._v("\n          done\n        ")]):a("i",{staticClass:"material-icons text-rose mr-2"},[t._v("close")]),t._v("\n        "+t._s(t.$t(e.title))+"\n      ")])])})),a("hr",{staticClass:"my-1"}),a("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button"}},[t._v("\n      "+t._s(t.$t("global.close"))+"\n    ")])],2)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown"}},[a("i",{staticClass:"fa fa-cog"}),a("span",{staticClass:"caret"})])}],i={name:"HeaderSettings",props:["columns"],methods:{isColVisible(t){return"undefined"===typeof t.visible||""+t.visible==="true"},handleChange(t){this.$set(t,"visible",!this.isColVisible(t))}}},o=i,r=(a("b15f"),a("2877")),l=Object(r["a"])(o,s,n,!1,null,"b03a5c46",null);e["a"]=l.exports},"3d02":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group bmd-form-group",class:{"has-items":t.query.s,"is-focused":t.focus}},[a("label",{staticClass:"bmd-label-floating"},[t._v("\n    Search\n  ")]),a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control",attrs:{type:"text",name:"search"},domProps:{value:t.query.s},on:{input:function(e){return t.debounceSearch(e.target.value)},focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}),0!==t.query.s.length?a("div",{staticClass:"btn btn-just-icon btn-round btn-link text-dark d-inline-block input-group-append m-0",staticStyle:{height:"36px"},on:{click:function(e){t.query.s=""}}},[a("i",{staticClass:"material-icons"},[t._v("clear")])]):t._e()])])},n=[],i={props:{query:{type:Object,require:!0}},data(){return{focus:!1}},methods:{debounceSearch:_.debounce((function(t){this.query.s=t,this.query.offset=0}),300)}},o=i,r=a("2877"),l=Object(r["a"])(o,s,n,!1,null,null,null);e["a"]=l.exports},"5ac0":function(t,e,a){},"602f":function(t,e,a){"use strict";var s=a("755e");e["a"]=Object(s["MapElementFactory"])({name:"directionsRenderer",ctr(){return window.google.maps.DirectionsRenderer},events:["directions_changed"],mappedProps:{options:{zoomControl:!1}},props:{origin:{type:Object},destination:{type:Object},waypoints:{type:Array},travelMode:{type:String}},afterCreate(t){let e=new window.google.maps.DirectionsService;this.$watch(()=>[this.origin,this.destination,this.waypoints,this.travelMode],()=>{let{origin:a,destination:s,waypoints:n,travelMode:i}=this;if(a&&s&&n&&i){new google.maps.DirectionsRenderer({suppressMarkers:!0});var o={start:new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",new google.maps.Size(44,32),new google.maps.Point(0,0),new google.maps.Point(22,32)),end:new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/green.png",new google.maps.Size(44,32),new google.maps.Point(0,0),new google.maps.Point(22,32))};t.setOptions({preserveViewport:!0}),t.setPanel(document.getElementById("panel")),e.route({origin:a,destination:s,travelMode:i,waypoints:n,provideRouteAlternatives:!0,optimizeWaypoints:!0},(e,a)=>{t.setDirections(e);var s=e.routes[0].legs[0];console.log(s.start_location),r(s.start_location,o.start,"title"),r(s.end_location,o.end,"title")})}function r(t,e,a){new google.maps.Marker({position:t,icon:e,title:a})}})}})},8918:function(t,e,a){"use strict";a("f142")},b15f:function(t,e,a){"use strict";a("210e")},f142:function(t,e,a){},f6c0:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{attrs:{id:"app"}},[a("GoogleMap")],1)])])])},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:t.fetchMap}},[a("i",{staticClass:"material-icons"},[t._v("\n          refresh\n        ")]),t._v("\n        Refresh\n      ")]),a("Modal",{attrs:{title:t.title,"modal-class":"modal-xl"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header",staticStyle:{"background-color":"rgb(34, 139, 34)"}},[a("i",{staticClass:"fa fa-university"}),a("strong",{staticStyle:{color:"white"}},[t._v(" Navigation Maps")])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"anyClass",attrs:{id:"panel"}})])]),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header",staticStyle:{"background-color":"rgb(34, 139, 34)"}},[a("i",{staticClass:"fa fa-university"}),a("strong",{staticStyle:{color:"white"}},[t._v(" Passenger List")])]),a("div",{staticClass:"anyClass"},t._l(t.passenger,(function(e){return a("div",{key:e.id,staticClass:"card-body "},[1==e.pickup?a("div",[a("b",[t._v(t._s(e.name))]),t._v(" - "),a("i",{staticClass:"material-icons",staticStyle:{color:"green"}},[t._v("check")])]):a("div",[a("b",[t._v(t._s(e.name))]),t._v(" - "),a("i",{staticClass:"material-icons",staticStyle:{color:"red"}},[t._v("block")])])])})),0)])]),a("div",{staticClass:"col-md-8"},[a("gmap-map",{staticStyle:{width:"100%",height:"800px"},attrs:{center:t.one_center,zoom:18}},[a("DirectionsRenderer",{attrs:{origin:this.one_center,destination:this.destination,waypoints:this.waypts,travelMode:"DRIVING"}})],1)],1)])]),a("gmap-map",{ref:"mapRef",staticStyle:{width:"100%",height:"800px"},attrs:{center:this.center,zoom:15}},[t._l(t.markers,(function(e,s){return a("gmap-marker",{key:s,attrs:{options:{preserveViewport:!0},position:e.position},on:{click:function(a){return t.toggleInfoWindow(e,s)}}})})),t._l(t.markers,(function(e,s){return a("div",{key:s},[a("gmap-info-window",{attrs:{options:t.infoOptions,position:e.position}},[a("div",{domProps:{innerHTML:t._s(t.infoContent=e.name)}})])],1)}))],2)],1)},o=[],r=a("aeac"),l=a("602f"),c=a("755e"),d=(a("5ac0"),{name:"GoogleMap",components:{DirectionsRenderer:l["a"]},data(){return{center:{lat:14.184794666666667,lng:121.283092},one_center:{lat:0,lng:0},waypts:[],destination:{lat:0,lng:0},passenger:[],currentPlace:null,showModal:!1,panel:"",title:"",markers:[],drivers:[],infoContent:"",infoWindowPos:{lat:0,lng:0},infoWinOpen:!0,currentMidx:null,infoOptions:{pixelOffset:{width:0,height:-35}}}},computed:{google:c["gmapApi"]},mounted(){this.renderMap()},methods:{fetchMap(){this.renderMap()},renderMap(){var t=this,e=r["c"].ref("driverTrips/");e.on("value",(function(e){const a=[];e.forEach((function(t){var e=t.key,s=t.val();if(0!=s.latitude){s.latitude,s.longitude;a.push({name:e,position:{lat:s.latitude,lng:s.longitude}})}})),t.markers=a}))},toggleInfoWindow:function(t,e){this.showModal=!0,1==this.showModal&&this.getOneData(t.name)},getInfoWindowContent:function(t){return`\n            <p class="title is-4">${t}</p>\n      `},getOneData(t){r["m"].where("status","==","On Going").where("vehicleID","==",t).onSnapshot(t=>{t.forEach(t=>{var e=t.data().vehicleID,a=t.data().routeID;this.updateData(e,a)})},t=>{console.log(t)})},updateData(t,e){this.title=t+" - "+e;const a=this;var s=r["c"].ref("driverTrips/");s.on("value",(function(e){var s=e.val()[t],n=parseFloat(s.latitude),i=parseFloat(s.longitude);a.one_center={lat:n,lng:i}})),r["m"].doc(e).onSnapshot(t=>{var e=t.data().passengerID,a=t.data().routeID;r["k"].doc(a).onSnapshot(t=>{var e=t.data(),a=e["destination"],s=e["pitstops"],n=[];r["g"].doc(a).onSnapshot(t=>{var e={lat:t.data().latitude,lng:t.data().longitude};this.destination=e}),s.forEach(t=>{r["g"].doc(t).onSnapshot(t=>{n.push({location:{lat:t.data().latitude,lng:t.data().longitude},stopover:!0})})}),this.waypts=n}),this.passenger=e})}}}),p=d,u=(a("8918"),a("2877")),g=Object(u["a"])(p,i,o,!1,null,null,null),m=g.exports,f=a("2f62"),h=a("3cc6"),v=a("3d02"),b={components:{GlobalSearch:v["a"],HeaderSettings:h["a"],GoogleMap:m},data(){return{xprops:{module:"MapRouteIndex",route:"map_route",permission_prefix:"map_route_"}}},beforeDestroy(){this.resetState()},computed:{...Object(f["c"])("MapRouteIndex",["data","total","loading"])},mounted(){},methods:{...Object(f["b"])("MapRouteIndex",["fetchIndexData","setQuery","resetState"])}},w=b,y=Object(u["a"])(w,s,n,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-4ab1a3e4.04546838.js.map